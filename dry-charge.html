<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dry Charge | Alaska Batteries</title>
    <link rel="icon" type="image/png" href="assets/favicon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-white">

    <div id="header-placeholder"></div>

 <main class="pt-20 bg-white">
    <section class="py-20 bg-white border-b border-gray-50">
        <div class="container mx-auto px-6 text-center">
            <h1 class="text-6xl md:text-8xl font-black uppercase mb-4 tracking-tighter">Dry <span class="text-[#cc001b]">Charge</span></h1>
            <p class="text-gray-400 font-bold uppercase tracking-[0.3em] text-xs">Pakistan's only Graphite Enhanced Lead Acid Battery</p>
        </div>
    </section>

    <section class="sticky top-20 z-30 bg-white/80 backdrop-blur-md border-b border-gray-100 py-6">
        <div class="container mx-auto px-6">
            <div class="bg-white p-4 shadow-xl flex flex-col md:flex-row gap-6 items-center border border-gray-100">
                <div class="relative w-full md:w-1/3 group">
                    <i class="fa-solid fa-magnifying-glass absolute left-4 top-1/2 -translate-y-1/2 text-gray-300 group-focus-within:text-[#cc001b] transition-colors"></i>
                    <input type="text" id="batterySearch" placeholder="SEARCH MODEL (E.G. A-50)..." 
                           class="w-full pl-12 pr-4 py-3 bg-gray-50 border-none focus:ring-2 focus:ring-[#cc001b] outline-none font-black uppercase text-xs tracking-widest">
                </div>
                
                <div class="flex flex-wrap gap-2 justify-center">
                    <button class="filter-btn active bg-black text-white px-6 py-3 text-[10px] font-black uppercase tracking-widest transition-all" data-cat="All">All</button>
                    <button class="filter-btn bg-white border border-gray-100 px-6 py-3 text-[10px] font-black uppercase tracking-widest hover:border-[#cc001b] transition-all" data-cat="Automotive">Automotive</button>
                    <button class="filter-btn bg-white border border-gray-100 px-6 py-3 text-[10px] font-black uppercase tracking-widest hover:border-[#cc001b] transition-all" data-cat="Solar">Solar</button>
                    <button class="filter-btn bg-white border border-gray-100 px-6 py-3 text-[10px] font-black uppercase tracking-widest hover:border-[#cc001b] transition-all" data-cat="Industrial">Industrial</button>
                </div>
            </div>
        </div>
    </section>

    <section class="py-12 bg-gray-50 min-h-screen">
        <div class="container mx-auto px-6">
            <div id="product-stage" class="flex flex-col md:flex-row items-center gap-12 bg-white p-8 md:p-16 shadow-2xl transition-all duration-500 min-h-[500px]">
    <div class="w-full md:w-1/2 flex justify-center">
        <img id="stage-image" src="" alt="Select a battery" class="max-h-[400px] object-contain transition-all duration-500">
    </div>

    <div class="w-full md:w-1/2 text-left">
        <div class="flex items-center gap-4 mb-2">
            <h2 id="stage-name" class="text-5xl md:text-7xl font-black uppercase tracking-tighter">Model</h2>
            <p id="stage-ah" class="text-2xl font-black text-white bg-[#cc001b] px-3">--</p>
        </div>
        <p id="stage-tech" class="text-[#cc001b] font-bold uppercase text-sm mb-8">Technology</p>
        
        <div class="grid grid-cols-2 gap-y-6 mb-10 border-t border-gray-100 pt-8">
            <div>
                <p class="text-[10px] text-gray-400 uppercase font-black tracking-widest">Plates</p>
                <p id="stage-plates" class="text-2xl font-black">--</p>
            </div>
            <div>
                <p class="text-[10px] text-gray-400 uppercase font-black tracking-widest">Power</p>
                <p id="stage-power" class="text-2xl font-black">--</p>
            </div>
            <div class="col-span-2">
                <p class="text-[10px] text-gray-400 uppercase font-black tracking-widest">Primary Uses</p>
                <p id="stage-uses" class="text-lg font-medium text-gray-600">--</p>
            </div>
        </div>
        <div id="stage-tags" class="flex flex-wrap gap-2"></div>
    </div>
</div>

<div id="thumb-grid" class="mt-12 grid grid-cols-4 md:grid-cols-8 gap-4"></div>

            <div class="mt-20">
                <p class="text-center font-black uppercase tracking-widest text-[10px] mb-8 text-gray-400">Select Model to Inspect</p>
                <div id="thumb-grid" class="grid grid-cols-3 md:grid-cols-6 lg:grid-cols-8 gap-4">
                    </div>
            </div>
        </div>
    </section>
</main>

    <div id="footer-placeholder"></div>

    <script src="js/data.js"></script>
    <script src="js/components.js"></script>
    <script src="js/main.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
    // Select elements
    const searchInput = document.getElementById('batterySearch');
    const thumbGrid = document.getElementById('thumb-grid');
    
    // Stage elements
    const stageName = document.getElementById('stage-name');
    const stageTech = document.getElementById('stage-tech');
    const stagePlates = document.getElementById('stage-plates');
    const stagePower = document.getElementById('stage-power');
    const stageAh = document.getElementById('stage-ah');
    const stageUses = document.getElementById('stage-uses');
    const stageImage = document.getElementById('stage-image');
    const stageTags = document.getElementById('stage-tags');

    // 1. UPDATE STAGE FUNCTION
    window.updateStage = function(id) {
        console.log("Updating stage for ID:", id);
        const battery = batteryData.find(b => b.id === id);
        
        if (!battery) {
            console.error("Battery not found for ID:", id);
            return;
        }

        // Apply Data to HTML
        stageName.innerText = battery.model;
        stageTech.innerText = battery.tech;
        stagePlates.innerText = battery.plates;
        stagePower.innerText = battery.p + "V";
        stageAh.innerText = battery.ah + " AH";
        stageUses.innerText = battery.uses;
        stageImage.src = battery.image;

        // Tags
        const allTags = [...battery.categories, ...battery.tags];
        stageTags.innerHTML = allTags.map(tag => 
            `<span class="bg-gray-100 px-3 py-1 text-[10px] font-black uppercase">${tag}</span>`
        ).join('');
    };

    // 2. RENDER THUMBNAILS FUNCTION
    function renderThumbnails(filteredData) {
        thumbGrid.innerHTML = ''; // Clear existing
        
        if (filteredData.length === 0) {
            thumbGrid.innerHTML = '<p class="col-span-full text-center py-10">No batteries found.</p>';
            return;
        }

        filteredData.forEach(battery => {
            const btn = document.createElement('button');
            btn.className = "bg-white border border-gray-100 p-2 hover:border-[#cc001b] transition-all group";
            btn.innerHTML = `
                <img src="${battery.image}" class="w-full h-auto grayscale group-hover:grayscale-0">
                <p class="text-[10px] font-black mt-2 text-center uppercase">${battery.model}</p>
            `;
            // Attach click event safely
            btn.onclick = () => window.updateStage(battery.id);
            thumbGrid.appendChild(btn);
        });

        // Auto-show the first one
        window.updateStage(filteredData[0].id);
    }

    // 3. FILTER LOGIC
    function applyFilters() {
        const term = searchInput.value.toLowerCase();
        const activeBtn = document.querySelector('.filter-btn.active');
        const activeCat = activeBtn ? activeBtn.getAttribute('data-cat') : 'All';

        const filtered = batteryData.filter(b => {
            const nameMatch = b.model.toLowerCase().includes(term);
            const ahMatch = b.ah.toString().includes(term);
            const catMatch = (activeCat === 'All') || b.categories.includes(activeCat);
            return (nameMatch || ahMatch) && catMatch;
        });

        renderThumbnails(filtered);
    }

    // 4. EVENT LISTENERS
    searchInput.addEventListener('input', applyFilters);

    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            document.querySelectorAll('.filter-btn').forEach(b => {
                b.classList.remove('active', 'bg-black', 'text-white');
                b.classList.add('bg-white');
            });
            this.classList.add('active', 'bg-black', 'text-white');
            this.classList.remove('bg-white');
            applyFilters();
        });
    });

    // START PAGE
    renderThumbnails(batteryData);
});
</script>
</body>
</html>